<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Power4 Web - Partie</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="/static/css/board.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <header>
      <h1>Power4 - Partie</h1>

      <!-- Infos joueurs -->
      <div class="players-info">
        <div class="player">
          <span class="player-token p1"></span>
          <strong>{{.Player1}}</strong>
        </div>
        <span class="vs">VS</span>
        <div class="player">
          <span class="player-token p2"></span>
          <strong>{{.Player2}}</strong>
        </div>
      </div>

      <!-- Tour actuel -->
      {{if not .Winner}}
      <p class="turn-indicator">
        Tour de :
        <strong class="{{if eq .CurrentPlayer 1}}player1-name{{else}}player2-name{{end}}">
          {{if eq .CurrentPlayer 1}}{{.Player1}}{{else}}{{.Player2}}{{end}}
        </strong>
      </p>
      {{end}}

      <!-- Difficult√© -->
      <p>
        Niveau :
        <strong class="difficulty-badge {{.Difficulty}}">{{.Difficulty}}</strong>
      </p>
    </header>

    <!-- Affichage du gagnant ou match nul -->
    {{if .Winner}}
      <div class="game-result winner">
        <div class="result-card">
          <h2 class="result-title">Victoire ! üéâ</h2>
          <p class="result-player">{{if eq .Winner 1}}{{.Player1}}{{else}}{{.Player2}}{{end}} a remport√© la partie</p>
        </div>
      </div>
    {{else if .Draw}}
      <div class="game-result draw">
        <div class="result-card">
          <h2 class="result-title">Match nul ü§ù</h2>
          <p class="result-player">Aucun gagnant cette fois-ci</p>
        </div>
      </div>
    {{end}}

    <!-- Plateau du jeu -->
    <div class="game-container">
      <form method="POST" action="/play">
        <input type="hidden" name="player1" value="{{.Player1}}">
        <input type="hidden" name="player2" value="{{.Player2}}">
        <input type="hidden" name="difficulty" value="{{.Difficulty}}">

        <!-- Ligne de boutons pour choisir la colonne -->
        {{if not .Winner}}
        <div class="columns">
          {{range .ColRange}}
            <button type="submit" name="col" value="{{.}}">‚ñº</button>
          {{end}}
        </div>
        {{end}}

        <!-- Grille du jeu -->
        <table class="board">
          {{range .Grid}}
            <tr>
              {{range .}}
                <td class="{{if eq . 1}}token1{{else if eq . 2}}token2{{end}}"></td>
              {{end}}
            </tr>
          {{end}}
        </table>
      </form>
    </div>
  </div>
</body>
</html>
